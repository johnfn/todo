<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>TypeScript HTML App</title>

    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="Content/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="Content/bootstrap-theme.css" type="text/css" />
    <link rel="stylesheet" href="app.css" type="text/css" />

    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

    <script src="Scripts/jquery-2.1.3.js"></script>
    <script src="Scripts/jquery.timeago.js"></script>
    <script src="Scripts/underscore.js"></script>
    <script src="Scripts/backbone.js"></script>
    <script src="Scripts/underscore.js"></script>
    <script src="Scripts/bootstrap.js"></script>

    <script src="app.js"></script>
    <script src="autocomplete.js"></script>
    <script src="keyboard-shortcuts.js"></script>
    <script src="storage.js"></script>

    <script src="nw-specific.js"></script>

    <script type="text/template" id="todo-edit">
        <div class="children">
            <div>
                <input class="name name-js" type="text" placeholder="title" />
            </div>

            <textarea class="invisible desc desc-js" rows="2" cols="10"></textarea>

            <div>
                <a class="edit-add-js" href="#">Add.</a>
                <a class="edit-cancel-js" href="#">Cancel.</a>
            </div>
        </div>
    </script>

    <script type="text/template" id="todo-archive-item">
        <%= name %>  - <span class="time"><%= archivalDate %></span>
        
        <% if (selected) { %>
            <span class="toolbar">
                <a href="#" class="todo-remove-js"> x </a>
            </span>
        <% } %>
    </script>

    <script type="text/template" id="todo-archive">
        <div class="todo-archive-list">

        </div>
    </script>

    <script type="text/template" id="topmost-todo">
        <div class="children-js"> </div>
    </script>

    <script type="text/template" id="todo">
        <div class="todo 
			 <% if (selected) print ('selected') %>
			 <% if (isDraggedOver && !isDraggedOverAsChild) print ('dragged-over') %>
			 <% if (isDraggedOverAsChild) print ('dragged-over-as-child') %>">
            <div class="todo-name
                 <% if (isFirstMatch) print('search-match') %>
                 <% if (searchResultParent) print('search-result-parent') %>">
                <span class="edit-name-js todo-name-content
					  <% if (done) print('todo-done') %>
					  <% if (isHeader) print('todo-header') %>">

                    <% if (!isHeader) { %>
                        <input type="checkbox" class="todo-done-js" <% if (done) print('checked') %> draggable="true" />
                    <% } %>

                    <% if (editingName) { %>
                        <input class='name-edit' />
                    <% } else { %>
                        <% if (starred) { %>
                            <i class="fa fa-star"></i>
                        <% } %>

                        <% if (!searchMatch) { %>
                            <%= name %>
                        <% } else { %>
                            <a href="#" class="search-link">
                                <% if (!isMatchInContent) { %>
                                    <%= firstSearchText %><span class="search-match"><%= middleSearchText %></span><%= finalSearchText %>
                                <% } else { %>
                                    <%= name %>
                                <% } %>
                            </a>
                        <% } %>
                    <% } %>
				</span>

                <% if (collapsed && !searching) { %> 
                    <a href="#" class="todo-hide-js hidden-ellipses">(<%= numActiveTotalChildren %>)</a>
                <% } %>

				<% if (selected) { %>
					<span class="toolbar">
						<a href="#" class="todo-add-js"> + </a>
                        <% if (!isHeader) { %>
                            <a href="#" class="todo-set-starred-js"> 
                                <i class="fa fa-star<%= starred ? '' : '-o' %>"></i>
                            </a>
                        <% } %>
						<a href="#" class="todo-remove-js"> - </a>
						<% if (numActiveChildren > 0) { %>
							<a href="#" class="todo-hide-js"> <%= collapsed ? '[+]' : '[-]' %> </a>
						<% } %>
                        <a href="#" class="todo-zoom-js">O</a>
					</span>
				<% } %>
            </div>

            <% if (content.length > 0) { %>
                <div class="todo-content edit-content-js"> 
                    <% if (searchMatch && isMatchInContent) { %>
                        <%= firstSearchText %><span class="search-match"><%= middleSearchText %></span><%= finalSearchText %>
                    <% } else { %>
                        <%= content %> 
                    <% } %>
                </div>
            <% } %>
            <input class='content-edit-js'/>

            <div class="children-js children <%= collapsed && !searching ? 'hide' : '' %>"> </div>
            <div class="todo-add"> </div>
        </div>
    </script>

    <script type="text/template" id="main">
        <div class="items">
        </div>
    </script>

    <script type="text/template" id="normal-shortcuts">
        <ul>
            <li> <b>Enter:</b> Edit todo name. </li>
            <li> <b>Shift + Enter:</b> Add a sub-todo. </li>
            <li> <b>Up/Down/Left/Right:</b> Navigate. </li>
            <li> <b>Ctrl + S:</b> See change history. </li>
        </ul>
    </script>

    <script type="text/template" id="editing-shortcuts">
        <ul>
            <li> <b>Enter:</b> Finish editing. </li>
            <li> <b>Esc:</b> Cancel editing. </li>
        </ul>
    </script>

	<script type="text/template" id="autosave-list-item">
		#<%= index %>: <a href="#">Auto-save at <span class="timeago-js"><%= date %></span></a>
	</script>

	<script type="text/template" id="right-panel">
		<div> 
			<b> <%= name %> </b> <%= doneCount %>/<%= totalCount %>
			<small class="time"> (added <%= createdDate %>) </small>
		</div>

		<% if (isEditingContent) { %>
			<div class="content-input-js">
				<textarea class="content-edit-js"><%= content %></textarea>
			</div>
		<% } else { %>
			<div class="content-js"> <%= content %> </div>
		<% } %>

        <% if (!archived) { %>
            <div>
                <input type="checkbox" class="header-checkbox-js" <% if (isHeader) print('checked') %>/> Header
            </div>
        <% } %>

        <div>
            <input type="checkbox" class="archived-checkbox-js"  <% if (archived) print('checked') %>/> Archived
        </div>
	</script>

    <script type="text/template" id="footer">
        <div class="container">
            <button type="submit" class="btn btn-link archive-all" <% if (!hasThingsToArchive) print('disabled') %>>
                Archive all done <% if (hasThingsToArchive) print('(' + numThingsToArchive + ')') %>
            </button>

            <% if (typeof firstStarredTodo !== 'undefined') { %>
                <a class="starred-item" href="#"> 
                    <i class="fa fa-star"></i> <%= firstStarredTodo.name %>
                </a>
            <% } %>
        </div>
    </script>

    <script type="text/template" id="autocomplete-section">
        <div class="autocomplete-heading"><%= section.headingName %></div>
        <% _.each(items, function(item) { %>
            <div class="autocomplete-item"> <%= item.name %> </div>
        <% }) %>
    </script>

    <script type="text/template" id="autocomplete">
        <div class="autocomplete">
        </div>
    </script>

    <script type="text/template" id="top-bar">
        <div class="title">
            <div class="container">
                <div class="title-content col-xs-8">
                    <i class="fa fa-cogs"></i>
                    <span class="title-text">todo</span>
                </div>
                <div class="col-xs-4">
                    <input type="text" placeholder="search" class="search-input" />
                    <div class="autocomplete-container">
                    </div>
                </div>
            </div>

            <div class="title-below"></div>
        </div>
            
        <div class="breadcrumb-container">

        </div>
    </script>

    <script type="text/template" id="breadcrumb-bar">
        <% for (var i = 0; i < parents.length; i++) { %>
            <a href="#" class="parent-todo" data-index="<%= i %>">
                <%= parents[i].name %>
            </a>
        <% } %>
    </script>

    <script type="text/template" id="archival-footer">
        <div class="container">
            <button type="submit" class="btn btn-link delete-all" <% if (!hasThingsToDelete) print('disabled') %>>
                Delete all <% if (hasThingsToDelete) print('(' + numThingsToDelete + ')') %>
            </button>
        </div>
    </script>

    <script type="text/template" id="tab-bar">
        <div class="col-sm-8">
            <div role="tabpanel">
                <ul class="nav nav-tabs" role="tablist">
                    <li role="presentation" class="active todo-tab-js">
                        <a href="#todos" aria-controls="todos" role="tab" data-tab="todos" data-toggle="tab">todos</a>
                    </li>
                    <li role="presentation" class="archive-tab-js">
                        <a href="#archive" aria-controls="archive" role="tab" data-tab="archive" data-toggle="tab">archive</a>
                    </li>
                </ul>

                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane active" id="todos">
                        <div id="main-content"></div>
                    </div>

                    <div role="tabpanel" class="tab-pane" id="archive">
                        <div id="archive-js"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-4 right-panel">
        </div>
    </script>
</head>
<body>
    <div class="top-bar-container">
        
    </div>

    <div class="container whole-todo-container">

    </div>

    <footer class="footer">
    </footer>

    <div class="keyboard-shortcuts">
        <span class="keyboard-header">
            Relevant shortcuts:
        </span>
        <a href="#" class="exit">x</a>

        <div class="shortcuts-js"> One </div>
    </div>

	<div class="modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title">Autosave List</h4>
				</div>
				<div class="modal-body">
					This is a list of all saved backups, sorted by time.
					<div class="items"></div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
</body>
</html>
